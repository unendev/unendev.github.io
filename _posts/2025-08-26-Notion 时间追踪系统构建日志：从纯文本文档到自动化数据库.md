---
layout: post
title: "Notion 时间追踪系统构建日志：从纯文本文档到自动化数据库"
tags: [Notion, 工作流, 自动化, 数据库, API]
date: 2025-08-27
comments: true
author: helpfulcraft
---

### 背景

我很久之前开始使用柳比歇伏计时法，我的做法是在notion单独建立一个“日结”页面，通过button按钮生成自定义的模板。最初的系统依赖于每日手动创建 Notion 区块，并且因多种因素偶尔输入的并非结构化文本，因此我把目光转向 Notion 数据库——一个结构化的，功能性强的 Notion 核心功能模块

**初始系统:**
```
## 8.26

8.51 8.57 9.50 10.04

- 五、第一类
    - 学习（）
    - 工作（）
- 二、第二类
    - 思考（）
    - 锻炼（节奏光剑14m）
...
```

这有几个问题：分类维度单一、回顾分析困难、数据处理流程高度依赖手动操作且易出错。升级的目标是解决这些问题，并为未来通过 Notion API 进行数据分析奠定基础

---

### 1. 从文档思路到数据库结构

关键在于思维转变：将时间记录从**文档（Document）**转变为**数据（Data）**。将所有时间记录条目迁移至一个单一的 Notion 数据库，每个时间片段成为数据库中的一行

**数据库结构：**

| 属性名 (Property)      | 类型 (Type)     | 目的                               |
| :--------------------- | :-------------- | :--------------------------------- |
| **活动名称 (Task)**    | `Title`         | 记录具体活动                       |
| **一级分类 (Category L1)** | `Select`        | 定义活动的大领域 (如“价值创造”)    |
| **二级分类 (Category L2)** | `Select`        | 对一级分类的细化                   |
| **标签 (Tags)**        | `Multi-select`  | 描述活动属性 (如`#输入`, `#深度工作`) |
| **开始时间 (Start)**   | `Date`          | 记录开始时间                       |
| **结束时间 (End)**     | `Date`          | 记录结束时间                       |
| **耗时(分) (Duration)** | `Formula`       | **自动计算时长**                   |

### 2. 每日日志生成

**目标**：实现点击 Button 生成当日工作区页面，简化日常记录流程

#### 2.1 最终工作流

1.  **柳比歇伏日志 (主数据库)**: 一个独立的数据库，作为所有时间记录的仓库![](https://helpfulcraft-blog.oss-cn-beijing.aliyuncs.com/20250827094719.png)
2.  **我的日结本 (日志数据库)**: 一个独立的数据库，用于存放生成的日志![](https://helpfulcraft-blog.oss-cn-beijing.aliyuncs.com/20250827094954.png)
3.  **日结模板 (Template)**: 在 `My Journals` 数据库**内部**创建一个模板，指向 `柳比歇伏日志` 的**关联数据库视图**，并预设过滤器，使其仅显示“创建日期为今天”的记录
4.  **自动化按钮**: 在主页页面上创建一个按钮，配置以下动作：在 `我的日结本` 数据库中，使用上述模板创建一个新页面
![](https://helpfulcraft-blog.oss-cn-beijing.aliyuncs.com/20250827094648.png)

### 3. Notion 日期属性的分钟精度输入

在实际使用中，遇到的一个问题是：在数据库视图中，点击日期属性无法直接输入或修改分钟。

**排查过程**：
*   检查了日期属性的配置，确认已开启“包含时间”
*   测试了不同的数据库视图（Table, List, Board），问题普遍存在
*   发现只有当一个日期属性**已经有了具体时间**后，再次点击才能进入分钟级别的编辑界面。如果该属性为空，则默认只出现日期选择器

> **Notion UI 机制**: Notion 的日期选择器似乎是上下文感知的。对于一个空的日期属性，它默认用户只想选择日期。只有当属性中已存在时间数据时，它才会提供时间编辑的完整 UI

**解决方案**：
- 不再记录时间戳，而是手动输入事物所耗时长 

### 4. 统计页面截图

![](https://helpfulcraft-blog.oss-cn-beijing.aliyuncs.com/20250827094525.png)

### 总结

> *   **`数据`优于`文档`**: 为机器分析而设计结构是自动化的第一步。应优先考虑结构化的数据库，而非非结构化的文本文档
> *   **分离`存储`与`工作区`**: 使用一个主数据库作为单一事实来源，通过关联视图创建不同的、临时的“工作区”，是 Notion 中一种强大且可扩展的架构模式
> *   **理解 Notion 组件**: 日结本页面通过链接到数据库，实现了每日添加事物记录的功能